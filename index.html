<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<title>AnaLingo ðŸŽµ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #f5f0ff, #ffe5f0);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: start;
  min-height: 100vh;
  margin: 0;
  padding: 60px 20px;
}

h1 {
  color: #7e1389;
  font-size: 2.5rem;
  text-align: center;
  margin-bottom: 30px;
}

p.description {
  color: #333;
  font-size: 1.1rem;
  text-align: center;
  margin-bottom: 40px;
}

#assignForm {
  background-color: #fff;
  padding: 30px 40px;
  border-radius: 15px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  align-items: center;
}

#assignForm input {
  padding: 12px;
  font-size: 18px;
  width: 250px;
  border: 1px solid #ccc;
  border-radius: 8px;
  outline: none;
}

#assignForm input:focus {
  border-color: #7e1389;
}

#assignForm button {
  padding: 12px 30px;
  font-size: 18px;
  background-color: #7e1389;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

#assignForm button:hover {
  background-color: #38063f;
}

#result {
  margin-top: 20px;
  font-size: 1.3rem;
  font-weight: 600;
  color: #333;
  min-height: 1.5em; 
}

#result.assigned {
  color: #007700;
}

#result.error {
  color: #7e1389;
}
</style>
</head>
<body>

<h1>AnaLingo â–¶ dodela jezika ðŸŽµðŸŽ§</h1>
<p class="description">Unesi svoj nick sa foruma i dobiÄ‡eÅ¡ jezik svog predloga za AnaLingo!ðŸ”®</p>

<div id="assignForm">
  <input type="text" id="username" placeholder="Unesi svoj nick ðŸ’œ">
  <button onclick="assignLanguage()">Dodeli jezik</button>
</div>

<p id="result"></p>

<script>
function assignLanguage() {
  const username = document.getElementById("username").value.trim();
  const result = document.getElementById("result");

  if (!username) {
    result.textContent = "Unesi nick ðŸ’œ";
    result.className = "error";
    return;
  }

  
  result.textContent = "Loading...";
  result.className = "";

  
  const cbName = "cb_" + Date.now() + "_" + Math.floor(Math.random()*1000);

  
  window[cbName] = function(data) {
    try {
      if (data.error) {
        result.textContent = data.error;
        result.className = "error";
      } else if (data.assigned && data.message) {
        result.textContent = data.message + " â€” " + data.assigned;
        result.className = "assigned";
      } else {
        result.textContent = "Dodeljen ti je jezik: " + data.assigned;
        result.className = "assigned";
      }
    } catch (e) {
      console.error("Callback handling error:", e);
      result.textContent = "NeÅ¡to nije u redu sa odgovorom servera.";
      result.className = "error";
    } finally {
      
      setTimeout(() => {
        if (scriptEl && scriptEl.parentNode) scriptEl.parentNode.removeChild(scriptEl);
        try { delete window[cbName]; } catch(e){ window[cbName] = undefined; }
      }, 100);
    }
  };

  
  const scriptEl = document.createElement("script");
  const base = "https://script.google.com/macros/s/AKfycbySg7XKXWRfk8TTT40TL8X0001gYWdKFjFaEsRox6uZmyEblQlP0MTBS63k59VDg5zZ2g/exec";
  scriptEl.src = base + "?username=" + encodeURIComponent(username) + "&callback=" + cbName;
  scriptEl.onerror = function(err){
    console.error("Script tag load error:", err);
    result.textContent = "GreÅ¡ka u komunikaciji sa serverom (network).";
    result.className = "error";
    // cleanup
    if (scriptEl && scriptEl.parentNode) scriptEl.parentNode.removeChild(scriptEl);
    try { delete window[cbName]; } catch(e){ window[cbName] = undefined; }
  };
  document.body.appendChild(scriptEl);
}
</script>




</body>
</html>








